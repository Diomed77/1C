Процедура ВывестиКлиентовБанка()
	Запрос=СоздатьОбъект("ODBCRecordSet");
	ТекстЗапроса="SELECT Контрагенты.CODE Код
	|					, Контрагенты.ID [Клиент $Справочник.Контрагенты]
	|					, $Контрагенты.ИНН ИНН
	|			  FROM $Справочник.Контрагенты AS Контрагенты With (NOLOCK)
	|			  WHERE ($Контрагенты.Банк IN (SELECT Val FROM #Банки)) AND (Контрагенты.ISMARK = 0)
	|					AND $Контрагенты.ПоАлфавиту NOT LIKE :Архив AND $Контрагенты.ПоАлфавиту NOT LIKE :Архив2  
	|			  ORDER BY $Контрагенты.ПоАлфавиту
	|";
	
	Запрос.УложитьСписокОбъектов(ТекущийЭлемент(),"#Банки","Банк");

	Запрос.УстановитьТекстовыйПараметр("Архив",Константа.СимволАрхивТоваров+"%");
	Запрос.УстановитьТекстовыйПараметр("Архив2","AA%");
	табл=Запрос.ВыполнитьИнструкцию(ТекстЗапроса);
	табл.Выгрузить(тКлиенты);
	тКлиенты.УстановитьПараметрыКолонки(1,,,,,7);
	тКлиенты.УстановитьПараметрыКолонки(2,,,,,40);
	тКлиенты.УстановитьПараметрыКолонки(3,,,,,10);
	
КонецПроцедуры

//======================================================================
Процедура ПриНажатии()
	Если ПустоеЗначение(тКлиенты.Клиент)=0 Тогда
		ОткрытьФорму(тКлиенты.Клиент);
	КонецЕсли;
КонецПроцедуры // ПриНажатии

Процедура стар_ПриЗаписи()
	
	Если ЭтоГруппа()=0 Тогда
		Если ПустоеЗначение(Код_Банка)=1 Тогда
			Предупреждение("Не введен код банка!");
			СтатусВозврата(0);
			Возврат;
		КонецЕсли;

		спрБ=СоздатьОбъект("Справочник.Банк");
		Если спрБ.НайтиПоРеквизиту("Код_Банка",Код_Банка,1)=1 Тогда
			Если спрБ.ТекущийЭлемент()<>ТекущийЭлемент() Тогда
				Предупреждение("Уже существует банк с таким кодом. Банк: "+спрБ.Код+" "+спрБ.Наименование);
				СтатусВозврата(0);
			КонецЕсли;
		КонецЕсли;
		
	КонецЕсли;
	
	
КонецПроцедуры

//Начало текста, вставленного Инсталлятором МОД
Процедура ПриПереносеЭлементаВДругуюГруппу(Спр, Группа)
	//Внимание: данная процедура при обновлении Менеджера будет перезаписана заново
	//без сохранения текущего кода !!!
	//Рекомендуем собственные алгоритмы записывать в старую процедуру с префиксом стар_
	ПриИзмененииОбъекта(Контекст, ТекущийЭлемент(), РабочаяДата());
КонецПроцедуры
//Конец текста, вставленного Инсталлятором МОД
//Начало текста, вставленного Инсталлятором МОД
Процедура ПриЗаписи()
	//Внимание: данная процедура при обновлении Менеджера будет перезаписана заново
	//без сохранения текущего кода !!!
	//Рекомендуем собственные алгоритмы записывать в старую процедуру с префиксом стар_
	ПриИзмененииОбъекта(Контекст, ТекущийЭлемент(), РабочаяДата());
	стар_ПриЗаписи();
КонецПроцедуры
//Конец текста, вставленного Инсталлятором МОД

Процедура кнПомощь()
	Помощь = СоздатьОбъект("Общие.Помощь");
	Помощь.Открыть( "Справочник.БанкСписок" );
КонецПроцедуры
